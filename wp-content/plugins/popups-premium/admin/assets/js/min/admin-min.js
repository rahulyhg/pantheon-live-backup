SPUP_ADMIN=function($){function s(s){"trigger-click"==s||"visible"==s?($(".spu-trigger-number").hide(),$(".spu-trigger-value").fadeIn()):"exit-intent"==s?($(".spu-trigger-number").hide(),$(".spu-trigger-value").hide()):($(".spu-trigger-value").hide(),$(".spu-trigger-number").fadeIn())}function t(s,t){return s.val()?parseInt(s.val()):void 0!==t?t+"px":0}function e(s,t){return s.val().length>0?s.wpColorPicker("color"):void 0!==t?t:""}function n(){var s=$("#content_ifr").contents().find("html");s.trigger("spu_tinymce_init"),s.css({background:"#9C9B9B;"}),""!=$("#spu_optin").val()&&(s.find("#tinymce").attr("style","border: "+t($("#spu-border-width"))+"px solid "+e($("#spu-border-color"))+" !important"),s.find("#tinymce").css({"background-color":e($("#spu-background-color")),color:e($("#spu-color"))}),s.find("button.spu-submit").css({"background-color":e($("#spu-button-bg")),"border-color":e($("#spu-button-bg")),color:e($("#spu-button-color"))}),s.find(".spu-fields-container").css({"background-color":e($("#spu-cta-bg2")),"border-color":e($("#spu-cta-bg2"))}))}function i(){SPUP_ADMIN.spu_editor=$("#content_ifr").contents().find("html #tinymce");var s=!1,t=SPUP_ADMIN.spu_editor.text();SPUP_ADMIN.spu_editor.find(".spu-box-container").length&&(s=!0,t=SPUP_ADMIN.spu_editor.html()),""==t&&SPUP_ADMIN.spu_editor.html('<h2 style="text-align:center">Support us!</h2><p style="text-align:center">Subscribe to get the latest offers and deals!</p>'),s||SPUP_ADMIN.spu_editor.find("*").wrapAll('<div class="spu-box-container"/>'),spup_js.opts.optin&&"custom"!=spup_js.opts.optin&&o(),SPUP_ADMIN.spu_editor.addClass(" spu-position-"+spup_js.opts.css.position).removeClass("wp-autoresize"),n()}function o(){var s=SPUP_ADMIN.spu_editor,t='<input type="email" name="spu-email" class="spu-fields spu-email" placeholder="'+$("#spu_optin_placeholder").val()+'"/>',e='<input type="text" name="spu-name" class="spu-fields spu-name" placeholder="'+$("#spu_optin_name_placeholder").val()+'"/>',n='<button type="submit" class="spu-fields spu-submit">'+$("#spu_optin_submit").val()+'<i class="spu-icon-spinner spu-spinner"></i></button>',i='<div class="spu-fields-container"><form id="spu-optin-form" class="spu-optin-form" action="" method="post"><input type="text" name="email" class="spu-helper-fields"/><input type="text" name="web" class="spu-helper-fields"/>';s.addClass("spu-optin-editor spu-theme-"+spup_js.opts.optin_theme+" spu-position-"+spup_js.opts.css.position).removeClass("wp-autoresize"),s.find(".spu-fields-container").remove(),$(".spu-box-width").hide(),"1"==spup_js.opts.optin_display_name&&(i+=e,s.addClass("with-spu-name")),i+=t,i+=n,i+="</form></div>",s.hasClass("spu-position-top-bar")||s.hasClass("spu-position-bottom-bar")?$(i).appendTo(s.find(".spu-box-container > p")):$(i).appendTo(s.find(".spu-box-container"))}function p(){var s=$("#spu-appearance input.spu-color-field");s.length&&s.wpColorPicker({change:n,clear:n})}function a(){var s=$("#content_ifr").contents().find("html #tinymce");s.find(".spu-fields-container").remove(),s.alterClass("spu-theme-*","")}var u="";return $(document).ready(function(){p(),$("#spu-appearance :input").not(".spu-color-field").change(n),$(".spu_reset_stats").on("click",function(){return confirm(spuvar.l18n.reset_stats)}),s($("#spu_trigger").val()),$("#spu_trigger").change(function(){s($(this).val())}),$("#spu_position").on("change",function(){var s=SPUP_ADMIN.spu_editor,t=$(this).val(),e=$("#spu_trigger").closest("tr"),n=$("#spu_animation").closest("tr");s.alterClass("spu-position-*","spu-position-"+t),"top-bar"!=t&&"bottom-bar"!=t||s.find('.spu-box-container *:not("p, .spu-fields-container, .spu-fields-container *")').remove(),"after-content"==t?(e.fadeOut(),n.fadeOut()):e.is(":visible")||(e.fadeIn(),n.fadeIn())}),$("#spu_optin").change(function(){var s=$(".optin-spinner"),t=SPUP_ADMIN.spu_editor,e=$(this);""==e.val()?($(".optin_opts").removeClass("visible"),a(),t.alterClass("spu-theme","")):"custom"==e.val()?($(".optin_opts").removeClass("visible"),$(".optin_theme").addClass("visible"),a()):(o(),p(),$(".optin_opts").addClass("visible").fadeIn(),s.fadeIn(),e.prop("disabled",!0),$.ajax({method:"POST",url:ajaxurl,data:{action:"spu_get_optin_lists",optin:e.val()}}).done(function(t){s.fadeOut(),e.prop("disabled",!1),t?($("#spu_optin_list").html(t),$(".optin_list").fadeIn()):$("#spu_optin_list").html("")}))}),$("#spu_optin_list").change(function(){var s=$(".optin-spinner"),t=$(this);s.fadeIn(),t.prop("disabled",!0),$.ajax({method:"POST",url:ajaxurl,data:{action:"spu_get_optin_list_segments",list:t.val(),optin:$("#spu_optin").val()}}).done(function(e){s.fadeOut(),t.prop("disabled",!1),e?($(".optin_list_segments .result").html(e),$(".optin_list_segments").fadeIn()):($(".optin_list_segments .result").html(""),$(".optin_list_segments").fadeOut())})}),$("#spu_optin_display_name").change(function(){var s=SPUP_ADMIN.spu_editor,t='<input type="text" class="spu-fields spu-name" placeholder="'+spup_js.opts.optin_name_placeholder+'" name="spu-name"/>';s.toggleClass("with-spu-name"),"1"==$(this).val()?s.find("#spu-optin-form").prepend(t):s.find(".spu-fields.spu-name").remove()}),$("#spu_optin_placeholder").blur(function(){var s=SPUP_ADMIN.spu_editor,t=$(this).val();s.find(".spu-email").prop("placeholder",t)}),$("#spu_optin_name_placeholder").blur(function(){var s=SPUP_ADMIN.spu_editor,t=$(this).val();s.find(".spu-name").prop("placeholder",t)}),$("#spu_optin_submit").blur(function(){var s=SPUP_ADMIN.spu_editor,t=$(this).val();s.find(".spu-submit").text(t)}),$(".optin_themes .theme").on("click",function(){var s=SPUP_ADMIN.spu_editor,t=$(this).data("theme");$(".optin_themes .theme").removeClass("selected"),$(this).addClass("selected"),$("#spu_optin_theme").val(t),s.alterClass("spu-theme-*","spu-theme-"+t),"bar"==t?$("#spu_position").val("top-bar").change():$("#spu_position").val("centered").change(),$("#spu-border-width").val(""),$("#spu-color").val("").change(),$("#spu-background-color").val("").change(),$("#spu-border-color").val("").change(),$("#spu-cta-bg2").val("").change(),$("#spu-button-bg").val("").change(),$("#spu-button-color").val("").change(),"cta"==t?$(".spu-cta_bg2").show():$(".spu-cta_bg2").hide()}),$(".toggle-provider").click(function(s){s.preventDefault(),$(this).closest(".collapse-div").toggleClass("active")})}),{onTinyMceInit:function(){i()}}}(jQuery),function($){$.fn.alterClass=function(s,t){var e=this;if(-1===s.indexOf("*"))return e.removeClass(s),t?e.addClass(t):e;var n=new RegExp("\\s"+s.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");return e.each(function(s,t){for(var e=" "+t.className+" ";n.test(e);)e=e.replace(n," ");t.className=$.trim(e)}),t?e.addClass(t):e}}(jQuery);